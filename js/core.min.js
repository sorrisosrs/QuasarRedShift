/*! Uglyfied Quasar RedShift 2014-11-12 */
var Menu=function(){function a(){}return a.prototype.getElement=function(){return this.$element},a.prototype.paint=function(){},a.prototype.inject=function(){},a}(),SimplePlugin=function(){function a(a){this.name=a}return a.prototype.getName=function(){return this.name},a.prototype.paint=function(){},a.prototype.inject=function(){},a.prototype.preExecute=function(){console.log(this.getName()+" foi carregado com sucesso.")},a.prototype.check=function(){return!1},a.prototype.execute=function(){console.log(this.getName()+" está sendo executado.")},a}(),PluginController=function(){function a(){}return a.prototype.addPlugin=function(a){this.plugins.push(a)},a.prototype.paint=function(a){var b=a.getElement();for(var c in this.plugins){var d=this.plugins[c];d.paint(b),d.inject()}},a.prototype.run=function(a){for(var b in this.plugins){var c=this.plugins[b];c.preExecute(),c.check(a)&&setTimeout(c.execute,10)}},a}();!function(){var a=new PluginController,b=location.href;a.run(b),console.log("Core.js")}();var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};Quasar={config:{version:"2.3.3137",name:"Quasar",author:"Wesley Nascimento",get:function(a,b){var c=new QJSON(game_data.player.name);return null===c.get(a)?b:c.get(a)},set:function(a,b){var c=new QJSON(game_data.player.name);c.set(a,b),c.save()}},"interface":{cache:{},menu:{$buttons:null,$infos:null,$menu:null,$countDown:$("#countDown"),isPaused:!1,ticker:[],init:function(){premium||Quasar.interface.menu.premiumChanges(),$("#quasar_menu").length>0&&$("#quasar_menu").remove(),$("body").append('<section id="quasar_menu" class="quasar" style="display:none;"></section>'),this.$menu=$("#quasar_menu"),this.addHTML('<div id="quasarTitle" class="title">'+Quasar.config.name+"</br>v"+Quasar.config.version+"</div>"),this.addHTML('<div id="quasarCount" class="section"><div id="countDown" class="timer" style="color: #9E0000; font-weight: 700; text-align: center; font-size: 14px;cursor: pointer;">00:00:00</div></div>'),this.addHTML('<div id="quasarButtons" class="section"></div>'),this.addHTML('<div id="quasarInfo" class="section"></div>'),this.addHTML('<div id="quasarSlide" class="slider">&raquo;</div>'),this.$buttons=$("#quasarButtons"),this.$infos=$("#quasarInfo"),this.$countDown=$("#countDown");var a=this;this.$countDown.on("click",function(){var b=a.isPaused;a.isPaused=b?!1:!0,UI.SuccessMessage(b?"O temporarizador retornou ao normal.":"O temporarizador foi pausado.")}),this.addButton(Quasar.lang.get("auto_farm"),Quasar.farm),this.addButton(Quasar.lang.get("wall_drop"),Quasar.wall),this.addButton(Quasar.lang.get("auto_recruit"),Quasar.train),this.addButton(Quasar.lang.get("auto_build"),Quasar.main),this.addButton(Quasar.lang.get("am_farm"),Quasar.am_farm),this.addButton(Quasar.lang.get("dodge"),Quasar.dodge),this.addButton(Quasar.lang.get("coordinator"),Quasar.coordinator),this.addButton(Quasar.lang.get("anti_afk"),Quasar.nucleo),this.addActionButton(Quasar.lang.get("import_export"),function(){var a="";a+="Importe e exporte os dados do seu Quasar e configurações.",a+="<table><tr>",a+='<td><input type="text" value="" id="import_val" placeholder="Importar codigo de configurações" size="20"><input type="button" value="Importar" id="btn_import"></td>',a+='<td><input type="text" value="" id="export_val" placeholder="Exportar configurações" size="20"><input type="button" value="Exportar" id="btn_export"></td>',a+="</tr></table>";var b=function(){$("#btn_import").on("click",function(){var a=$("#import_val").val();""!==a&&Quasar.nucleo.importData(a)}),$("#btn_export").on("click",function(){var a=Quasar.nucleo.exportData();$("#export_val").val(a),$("#export_val").focus(),$("#export_val").select()})};Quasar.interface.menu.popupBox(Quasar.lang.get("import_export"),a,400,null,b)}),this.addActionButton(Quasar.lang.get("welcome_window"),Quasar.interface.menu.showWelcome),this.addActionButton(Quasar.lang.get("configuration"),function(){var a=Quasar.interface.menu.configDraw,b=Quasar.interface.menu.configHtml();Quasar.interface.menu.popupBox(Quasar.lang.get("configuration"),b,400,null,a)}),this.addInformation("Ping","ping",function(){null==Quasar.interface.cache.$ping&&(Quasar.interface.cache.$ping=$("#ping"));var a=Quasar.config.get("pings",[]);Quasar.interface.cache.$ping.text(a[a.length-1]+"ms")}),this.addInformation("Ping Médio","aping",function(){null==Quasar.interface.cache.$aping&&(Quasar.interface.cache.$aping=$("#aping"));var a,b=Quasar.config.get("pings",[]);if(3==b.length){for(var c=0,d=b.length-1;d>b.length-4;d--)c+=Number(b[d]);a=Math.round(c/3)+"ms"}else a="Calc...";Quasar.interface.cache.$aping.text(a)}),this.addInformation(Quasar.lang.get("attacks_today"),"attackcount",function(){null==Quasar.interface.cache.$attackcount&&(Quasar.interface.cache.$attackcount=$("#attackcount"));var a=new QJSON("attacks",!0),b=$("#serverDate").text();a.contains(b)||(a.add(b,0),Quasar.config.set("attacks",a.toJSON()));var c=a.get(b);Quasar.interface.cache.$attackcount.text(c)},function(){var a=Quasar.lang.get("attacks_today"),b="";b+='<table class="vis nowrap tall" style="width: 100%"><tbody><tr><th>Date</th><th>Attacks</th></tr>';var c=new QJSON("attacks",!0);for(var d in c.cache)b+="<tr><td>"+d+"</td><td>"+c.get(d)+"</td></tr>";b+="</tbody></table>",Quasar.interface.menu.popupBox(a,b,400,null,null)});var b=Quasar.config.get("slider",!0);this.showHideMenu(b),$("#quasarSlide").on("click",function(){var a=Quasar.config.get("slider",!0);Quasar.config.set("slider",!a),Quasar.interface.menu.showHideMenu(!a)}),$("#quasarLoading").fadeOut("slow"),$("#quasar_menu").show(),this.tick()},addHTML:function(a){this.$menu.append(a)},addButton:function(a,b){b.$element=$('<div class="button">'+a+"</div>"),this.$buttons.append(b.$element);var c=function(){b.getStatus()?b.$element.addClass("active"):b.$element.removeClass("active")};b.$element.on("click",function(){var a=b.getStatus();b.setStatus(!a),c()}),c()},addActionButton:function(a,b){var c=$('<div class="button action">'+a+"</div>");c.on("click",b),this.$buttons.append(c)},addInformation:function(a,b,c,d){"undefined"==typeof d?this.$infos.append("<div><b>"+a+'</b>: <span id="'+b+'"></span></div>'):(this.$infos.append("<div><b>"+a+'</b>: <span id="'+b+'" style="font-weight: 700;color: #603000;"></span></div>'),$("#"+b).on("click",d)),"undefined"!=typeof c&&this.ticker.push(c)},countDown:function(a,b){return 0>a?void b():(Quasar.interface.menu.isPaused||(this.$countDown.text(Quasar.utils.secToString(a)),--a),void setTimeout(function(){Quasar.interface.menu.countDown(a,b)},1e3))},popupBox:function(a,b,c,d,e){var f=$("#quasar_popup");if(f.length>0)return void f.fadeTo(500,0,function(){f.remove(),Quasar.interface.menu.popupBox(a,b,c,d,e)});$("body").append('<div id="quasar_popup" class="popup_style ui-draggable" style="position: fixed;"></div>');var g=$("#quasar_popup");g.append('<div class="popup_menu"><span style="float: left;">'+a+'</span><a href="javascript:void(0);" id="closePop">x</a></div>'),$("#closePop").on("click",Quasar.interface.menu.closePop),g.draggable(),g.append('<div class="popup_content">'+b+"</div>"),null!==c?g.css("width",c):g.css("width","auto"),null!==d?g.css("height",d):g.css("height","auto");var h=window.innerWidth/2-c/2,i=window.innerHeight/2-parseInt(g.css("height"))/2;g.css("left",h),g.css("top",i>10?i:10),null!==e&&e(),g.fadeTo(500,1)},closePop:function(){var a=$("#quasar_popup");a.fadeTo(500,0,function(){a.remove()})},showHideMenu:function(a){{var b=$("#quasar_menu");$("#quasarSlide")}a?b.animate({left:"0px"},500):b.animate({left:"-143px"},500)},tick:function(){setTimeout(function(){Quasar.interface.menu.tick()},1e3);for(var a=0;a<this.ticker.length;a++)this.ticker[a]()},premiumChanges:function(){var a=game_data.screen,b=Quasar.utils.getNextVillage(),c=Quasar.utils.getPrevVillage();$("#menu_row2").prepend('<td class="box-item icon-box separate arrowCell" style="display:none;"><a id="village_switch_left" class="village_switch_link" href="?village='+c+"&screen="+a+'" accesskey="a"><span class="arrowLeft"> </span></a></td><td class="box-item icon-box arrowCell" style="display:none;"><a id="village_switch_right" class="village_switch_link" href="?village='+b+"&screen="+a+'" accesskey="d"><span class="arrowRight"> </span></a></td>'),$(".box-item").show(1e3)},configDraw:function(){$("#langSelect").val(Quasar.config.get("language","en")),$("#save").on("click",function(){Quasar.config.set("language",$("#langSelect").val()),Quasar.config.set("min_rand",$("#min_rand").val()),Quasar.config.set("max_rand",$("#max_rand").val()),Quasar.config.set("max_recruit_time",$("#max_recruit_time").val());var a=premium?5:2;Number($("#max_build_queue").val())<=a&&Quasar.config.set("max_build_queue",$("#max_build_queue").val()),Quasar.config.set("am_is_by_ratio",$("#am_is_by_ratio").is(":checked")),Quasar.config.set("attack_control",$("#attack_control").is(":checked")),Quasar.config.set("am_dis_ratio",$("#am_dis_ratio").val()),Quasar.config.set("max_am_dis",$("#max_am_dis").val()),Quasar.config.set("max_am_attacks",$("#max_am_attacks").val()),Quasar.config.set("blue_reports",$("#blue_reports").is(":checked")),Quasar.config.set("yellow_reports",$("#yellow_reports").is(":checked")),Quasar.config.set("use_c_am",$("#use_c_am").is(":checked")),Quasar.config.set("stop_end_farm",$("#stop_end_farm").is(":checked")),Quasar.config.set("max_am_wall",$("#max_am_wall").val()),Quasar.config.set("wall_drop_spy",$("#wall_drop_spy").val()),Quasar.config.set("wall_drop_ram",$("#wall_drop_ram").val()),Quasar.config.set("wall_drop_axe",$("#wall_drop_axe").val()),Quasar.config.set("delete_most_attacked",$("#delete_most_attacked").val()),Quasar.config.set("sound_alarm",$("#sound_alarm").is(":checked"));var b=$("#dodge_target").val();Quasar.config.set("dodge_target",""!==b?b:null),UI.SuccessMessage("Suas configurações foram salvas!")});var a=$("#tabs");a.tabs(),a.tooltip({position:{my:"left+15 center",at:"right center",using:function(a){var b=$(this);b.css(a),b.css("z-index",1e5)}},tooltipClass:"tooltip-style",track:!0})},configHtml:function(){var a="",b="";a+='<div id="tabs">',a+="<ul>",a+='<li><a href="#tab-geral">Geral</a></li>',a+='<li><a href="#tab-as">Auto AS</a></li>',a+='<li><a href="#tab-wall">Muralha</a></li>',a+="</ul>",b+="<select id='langSelect'>";for(var c in Quasar.lang)"undefined"!=typeof Quasar.lang[c].language&&(b+="<option value='"+c+"'>"+Quasar.lang[c].language+"</option>");return b+="</select>",a+='<div id="tab-geral">',a+='<table class="vis" style="width:100%"><tbody>',a+="<tr><th>Descrição</th><th>Valor</th></tr>",a+='<tr><td colspan="2"><strong>Geral</strong></td></tr>',a+="<tr><td>Linguagem: </td><td>"+b+"</td></tr>",a+='<tr><td><span title="Define o tempo minimo em que o sistema gera o temporalizador aleatorio.">Tempo minimo para o temporalizador: </span></td><td><input type="text" id="min_rand" size="2" value="'+Quasar.config.get("min_rand",300)+'"/>segundos</td></tr>',a+='<tr><td><span title="Define o tempo maximo em que o sistema gera o temporalizador aleatorio.">Tempo maximo para o temporalizador: </span></td><td><input type="text" id="max_rand" size="2" value="'+Quasar.config.get("max_rand",900)+'"/>segundos</td></tr>',a+='<tr><td><span title="Define o tempo maximo da fila de recrutamento do Recrutador. Caso a fila esteja maior que esse limite, ele não irá recrutar.">Tempo maximo de recrutamento: </span></td><td><input type="text" id="max_recruit_time" size="2" value="'+Quasar.config.get("max_recruit_time",8)+'"/> horas</td></tr>',a+='<tr><td><span title="Define a quantidade maxima de edificios que serão colocados na fila de recrutamento ao mesmo tempo.">Quantidade maxima de edificios na fila: </span></td><td><input type="text" id="max_build_queue" size="2" value="'+Quasar.config.get("max_build_queue",premium?5:2)+'"/></td></tr>',a+='<tr><td><span title="Usando o Farmador, deseja parar de farmar assim que estiver no final da lista de coordenadas?">Parar de farmar ao chegar no fim da lista: </span></td><td><input type="checkbox" id="stop_end_farm" '+(Quasar.config.get("stop_end_farm",!1)?"checked":"")+"/></td></tr>",a+='<tr><td>Tocar alarm quando aparecer um Captcha: </td><td><input type="checkbox" id="sound_alarm" '+(Quasar.config.get("sound_alarm",!0)?"checked":"")+"/></td></tr>",a+='<tr><td><span title="Define alvo para o dodge. O Dodge funciona apenas com uma aldeia.">Alvo para dodge: </span></td><td><input type="text" placeholder="123|456" id="dodge_target" size="3" value="'+Quasar.config.get("dodge_target","")+'"/></td></tr>',a+="</tbody></table>",a+="</div>",a+='<div id="tab-as">',a+='<table class="vis" style="width:100%"><tbody>',a+="<tr><th>Descrição</th><th>Valor</th></tr>",a+='<tr><td colspan="2"><strong>Assistente de Saque</strong></td></tr>',a+='<tr><td><span title="Define a distancia maxima em que o Auto AS enviará um ataques.">Distancia de ataques maxima:</span></td><td><input type="text" id="max_am_dis" size="2" value="'+Quasar.config.get("max_am_dis",20)+'"/>campos</td></tr>',a+='<tr><td><span title="Deseja que o Auto AS defina automaticamente quantos ataques pode ser enviado a uma aldeia baseado em sua distancia?">Usar sistema de razão?</span></td><td><input type="checkbox" id="am_is_by_ratio" '+(Quasar.config.get("am_is_by_ratio",!1)?"checked":"")+"/></td></tr>",a+='<tr><td><span title="Define quantos ataques podem ser enviados para cada campo de distancia. Pode ser um valor decimal ou inteiro.">Ataque por campo: </span></td><td><input type="text" id="am_dis_ratio" size="2" value="'+Quasar.config.get("am_dis_ratio",1)+'"/>(Ex: 0.2)</td></tr>',a+='<tr><td><span title="Deseja que o Auto AS priorize a atacar aldeias que tenham menos ataques a caminho?">Usar controlador de ataques? </span></td><td><input type="checkbox" id="attack_control" '+(Quasar.config.get("attack_control",!1)?"checked":"")+"/></td></tr>",a+='<tr><td><span title="Define a quantidade maximas de ataques que serão enviadas a uma unica aldeia.">Quantidade maxima de ataques: </span></td><td><input type="text" id="max_am_attacks" size="2" value="'+Quasar.config.get("max_am_attacks",2)+'"/></td></tr>',a+='<tr><td><span title="Define o nivel maximo de muralha aceito para que seja atacado.">Nivel maximo de muralha:</span></td><td><input type="text" id="max_am_wall" size="2" value="'+Quasar.config.get("max_am_wall",3)+'"/></td></tr>',a+='<tr><td><span title="Deseja atacar aldeias cujo o ultimo relatorio foi de exploração?">Atacar relatorios de exploração? </span></td><td><input type="checkbox" id="blue_reports" '+(Quasar.config.get("blue_reports",!1)?"checked":"")+"/></td></tr>",a+='<tr><td><span title="Deseja que o Auto AS adicione automaticamente relatorios amarelos ou em que a muralha seja maior que o limite para a lista de aldeias em que a muralha deve ser derrubada?">Adicionar ao Derrubador de Muralhas?</span></td><td><input type="checkbox" id="yellow_reports" '+(Quasar.config.get("yellow_reports",!0)?"checked":"")+"/></td></tr>",a+='<tr><td><span title="Deseja que o Auto AS use o Template C para farma? Só são atacadas aldeias em que a soma dos recursos é maior que 1000.">Usar o templace C?:</span></td><td><input type="checkbox" id="use_c_am" '+(Quasar.config.get("use_c_am",!0)?"checked":"")+"/></td></tr>",a+='<tr><td><span title="Deseja deletar aldeias em que o limite de ataques simultaneos já foi atingido? Isso libera mais espaço na pagina do AS.">Deletar ataques acima do limite?:</span></td><td><input type="checkbox" id="delete_most_attacked" '+(Quasar.config.get("delete_most_attacked",!1)?"checked":"")+"/></td></tr>",a+="</tbody></table>",a+="</div>",a+='<div id="tab-wall">',a+='<table class="vis" style="width:100%"><tbody>',a+="<tr><th>Descrição</th><th>Valor</th></tr>",a+='<tr><td colspan="2"><strong>Configurações do Derrubador de Muralhas</strong></td></tr>',a+='<tr><td><span title="Quantidade de exploradores a enviar">Exploradores:</span></td><td><input type="text" id="wall_drop_spy" size="2" value="'+Quasar.config.get("wall_drop_spy",1)+'"/></td></tr>',a+='<tr><td><span title="Quantidade de Arietes a enviar">Arietes:</span></td><td><input type="text" id="wall_drop_ram" size="2" value="'+Quasar.config.get("wall_drop_ram",15)+'"/></td></tr>',a+='<tr><td><span title="Quantidade de Barbaros a enviar">Barbaros:</span></td><td><input type="text" id="wall_drop_axe" size="2" value="'+Quasar.config.get("wall_drop_axe",30)+'"/></td></tr>',a+="</tbody></table>",a+="</div>",a+="</div>",a+="<div>",a+='<input  class="btn" type="button" id="save" value="Salvar"/>',a+="</div>"},showWelcome:function(){var a="";a+="<span style='size: 16px; font-weight: bold'>Sobre o Quasar.</span></br>",a+="Quasar é formado por um conjunto de ferramentas, cujo o intuito é fazer com que seja mais pratico jogar TribalWars.</br>",a+="Algumas dessas ferramentas são ilegais segundo as regras do jogo, esteja ciente que o mal uso ou uso excessivo pode causar o banimento de sua conta.</br>",a+="Quasar tem sido desenvolvido por <strong>Wesley Nascimento</strong> desde Novembro de 2013. E vem sido distribuido dentro da licensa Creative Commons.</br>",a+="<br><strong style='size: 16px; font-weight: bold'>Termos de uso e Politica de privacidade</strong></br>",a+="<ul>",a+="<li>O author não se resposabiliza por punições ou banimentos.</li>",a+="<li>Quasar envia informaçoes anonimas sobre seu uso para um servidor externo.</li>",a+="<li>O author não garante suporte ao projeto a longo prazo.</li>",a+="<li>O author se reserva ao direito de mudar esses termos a qualquer momento sem aviso previo ou posterior.</li>",a+="<li>Quasar armazena informações e configurações em seu navegador.</li>",a+="</ul>",a+="<span style='color:#c00; font-weight: bold'>Ao usar o Quasar você automaticamente está ciente e concorda com todos os termos listados acima.</span></br>",a+="<br><span style='size: 16px; font-weight: bold'>Terminando a instalação</span></br>",a+="Para que você possa executar o Quasar sem problemas ou conflitos é preciso que ele obtenha algumas informações da sua conta.</br>",a+="<ul>",a+="<li>Quantidade de aldeias.</li>",a+="<li>Identificação das aldeias.</li>",a+="<li>Se possui conta premium.</li>",a+="<li>Se possui assistente de saques.</li>",a+="<li>Quantidade de ataques chegando.</li>",a+="<li>Se está em modo de ferias.</li>",a+="<li>Se está como sitter.</li>",a+="</ul>",a+="<br>Essas informações serão obtidas automaticamente ao clicar no botão abaixo. Atenção você será redirecionado para outra pagina.</br>",a+="<center><a href='#' id='btn_first_use' class='evt-confirm btn'>Configurar</a></center></br>",a+='<center><a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/"><img alt="Licença Creative Commons" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/4.0/88x31.png" /></a><br /><span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">Quasar</span> de <a xmlns:cc="http://creativecommons.org/ns#" href="wesleynascimento.com/quasar" property="cc:attributionName" rel="cc:attributionURL">wesleynascimento.com/quasar</a> está licenciado com uma Licença <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">Creative Commons - Atribuição-NãoComercial 4.0 Internacional</a>.</center>';var b=function(){$("#btn_first_use").on("click",function(){if(0===game_data.player.sitter)location.href="?village="+game_data.village.id+"&screen=overview_villages&mode=prod";else{var a=location.href.match(/t=\d+/i);location.href="?village="+game_data.village.id+"&screen=overview_villages&mode=prod&"+a}})};Quasar.interface.menu.popupBox("Bem vindo ao Quasar!",a,600,null,b)}},praca:function(){var a='<table width="100%" class="paris-badge">';a+='<tr><td width="100%">',a+='<input type="text" id="coords" name="name" value="" style="width: 98%;" placeholder="Cole coordenadas para darmar aqui (ex: 666|666 666|666)">',a+="</td><td>",a+='Em <span id="current">0</span> de <span id="number">0</span> coordenadas',a+="</td></tr>",a+="<tr><td>",a+='<input type="text" id="wall_coords" name="name" value="" style="width: 98%;" placeholder="Cole coordenadas para o derrubador de muralha (ex: 666|666 666|666)">',a+="</td><td>",a+='<span id="wall_number">0</span> coordenadas',a+="</td></tr>",a+="</table>";var b=$(a),c=$('<table class="content-border vis nowrap tall" width="100%" id="build_script" style="opacity:0"><tr><th style="width: 66%">'+Quasar.lang.get("option")+' [ <a id="ordenar">'+Quasar.lang.get("order")+'</a> | <a id="limpar">'+Quasar.lang.get("clean")+'</a> ]</th></tr><tr><td id="body" style="padding: 10px 5px;"></td></tr></table></br>');c.find("#body").append(b),$("#contentContainer").before(c);var d=$("#coords"),e=$("#number"),f=$("#wall_coords"),g=$("#wall_number"),h=Quasar.config.get("index_"+game_data.village.id,0);$("#current").text(h);var i=Quasar.config.get("coords_"+game_data.village.id,[]);d.val(i.join(" ")),e.text(i.length),d.on("change",function(){var a=ele_coords.val().split(" ");e.text(a.length),Quasar.config.set("coords_"+game_data.village.id,a)});var j=Quasar.config.get("wall_coords",[]);f.val(j.join(" ")),g.text(j.length),f.on("change",function(){var a=f.val().split(" ");g.text(a.length),Quasar.config.set("wall_coords",a)}),$("#ordenar").on("click",function(){var a=game_data.village.coord,b=Quasar.utils.orderByDis(a,d.val());d.val(b.join(" ")),e.text(b.length),Quasar.config.set("coords_"+game_data.village.id,b)}),$("#limpar").on("click",function(){var a=Quasar.utils.clean(d.val());d.val(a.join(" ")),e.text(a.length),Quasar.config.set("coords_"+game_data.village.id,a)}),$("#btnOptions").on("click",function(){var a=Quasar.lang.get("option")+" - "+Quasar.lang.get("break_Wall"),b="";Quasar.interface.menu.popupBox(a,b,600,null,null)}),$("#build_script").fadeTo(1e3,1)},ed_principal:{start:function(){var a=$("#build_script");a.length>0&&(a.remove(),$("#img_addBuild").remove()),$("#buildings tr").each(function(a){var b=$(this);if(0==a||b.find("td:eq(1) .inactive").length>0)return b.append("<td></td>"),!0;var c=b.attr("id");b.append("<td id='img_addBuild'><img class='build_cancel' data-ed='"+c+"' title='"+Quasar.lang.get("add_icon_title")+"' src='/graphic/overview/build.png'></img></td>")});var b=$('<div style="margin-bottom: 10px"><table id="build_script" style="opacity:0" class="content-border vis nowrap tall" width="100%"><tr><th style="width: 66%">'+Quasar.lang.get("builds")+'(<span id="number"></span>) [ <a id="mostrar">'+Quasar.lang.get("show_link")+'</a> | <a id="limpar">'+Quasar.lang.get("clean")+'</a> | <a id="ordenar">'+Quasar.lang.get("order")+'</a>]</th></tr><tr><td id="main_order"></td></tr></table></div><div style="display:none; margin-bottom: 10px"><table id="sortable-list" class="content-border vis nowrap tall" width="100%" style="border-spacing: 2px !important;"></table></div>');$("#contentContainer").before(b),$("#mostrar").on("click",function(){var a=$("#sortable-list").parent(),b=$(this);b.text()==Quasar.lang.get("show_link")?(a.slideDown(),b.text(Quasar.lang.get("hide_link"))):(a.slideUp(),b.text(Quasar.lang.get("show_link")))}),$("#limpar").on("click",function(){Quasar.config.set("queue_"+game_data.village.id,[]),Quasar.main.load()}),$("#ordenar").on("click",function(){Quasar.main.order()}),$("#build_script").fadeTo(1e3,1)},addBuildIcon:function(){$("#img_addBuild img").on("click",function(){var a,b=Quasar.config.get("queue_"+game_data.village.id,[]),c=$(this).attr("data-ed").replace("main_buildrow_","");if(a="undefined"!=typeof Quasar.main.niveis[c]?Quasar.main.niveis[c]+1:Quasar.main.getCurrentNivel(c)+1,a>Quasar.game.builds[c].max)return void UI.ErrorMessage("Edificil já atingiu nivel maximo.");b.push(c),Quasar.config.set("queue_"+game_data.village.id,b),Quasar.main.load(),UI.SuccessMessage("Adicionado "+c+" nivel "+a+" a fila do construtor.");var d=Quasar.utils.stringToSec($("#countDown").text());0>=d&&Quasar.main.getStatus()&&Quasar.utils.setReload("&screen=main")})},cleanTables:function(){var a=$("#sortable-list");a.html("");var b="<tr>";b+='<th style="width: 23%">'+Quasar.lang.get("build_queue")+"</th>",b+="<th>"+Quasar.lang.get("build_level")+"</th>",b+='<th colspan="3">'+Quasar.lang.get("price")+"</th>",b+="<th></th>",b+="<th></th>",b+="<th></th>",b+="</tr>",$("#newNivel").remove(),a.append(b)},makeSortable:function(){$("#sortable-list tbody").sortable({forcePlaceholderSize:!0,cursor:"move",revert:!0,tolerance:"pointer",stop:function(){var a=$(this).sortable("toArray");a.shift(),Quasar.config.set("queue_"+game_data.village.id,a),Quasar.main.load()}}).disableSelection()},addToList:function(a,b,c){var d=Quasar.game.builds[a],e=d.name,f=parseInt(d.wood*Math.pow(d.fwood,b-1)),g=parseInt(d.stone*Math.pow(d.fstone,b-1)),h=parseInt(d.iron*Math.pow(d.firon,b-1)),i=parseInt(d.pop*Math.pow(d.fpop,b-1))-parseInt(d.pop*Math.pow(d.fpop,b-2)),j="";j+='<tr id="'+a+'" class="sortable_row">',j+='<td><img src="graphic/buildings/mid/'+a+'1.png" class="bmain_list_img"><a href="?village=43158&screen='+a+'">'+e+"</a></td>",j+='<td class="paris-badge">'+Quasar.lang.get("build_level")+" "+b+"</td>",j+='<td><span class="icon header wood"></span>'+f+"</td>",j+='<td><span class="icon header stone"></span>'+g+"</td>",j+='<td><span class="icon header iron"></span>'+h+"</td>",j+='<td><span class="icon header population"></span>'+i+"</td>",j+='<td><img class="tool_icon icon header" id="remove" data-ed="'+c+'" title="'+Quasar.lang.get("remove_icon_title")+'" src="/graphic/forum/thread_delete.png" /></td>',j+='<td><img src="/graphic/sorthandle.png" style="width: 11px; height:11px; ursor:pointer" id="move" data-ed="'+c+'" /></td>',j+="</tr>",$("#sortable-list").append(j),$("#main_order").append('<img src="/graphic/buildings/mid/'+a+'1.png" style="margin-left: 5px;">');var k=$("#main_buildrow_"+a).find("span:eq(0)");k.find("#newNivel").length>0?k.find("#newNivel").text(" - ("+b+")"):k.append('<span style="font-size: 0.9em; color: #000AFF;" id="newNivel"> - ('+b+")</span>"),$("#sortable-list #remove").last().on("click",function(){var a=Number($(this).attr("data-ed")),b=Quasar.config.get("queue_"+game_data.village.id,[]);b.splice(a,1),Quasar.config.set("queue_"+game_data.village.id,b),Quasar.main.load(),UI.SuccessMessage(a+" removido do construtor.")})}},coordinator:{start:function(){var a="";a+='<table class="vis" width="327" id="coordinator_table">',a+="<tbody>",a+="<tr>",a+='<th colspan="2">',a+="Coordenador",a+="</th>",a+="</tr>",a+="<tr>",a+="<td>Data e Horario:</td>",a+="<td>",a+='<span id="send" style="display: none"></span>',a+='<input type="text" id="edit">',a+="</td>",a+="</tr>",a+="<tr>",a+='<td><span title="Determina a maneira em que o Coordenador vai enviar esse ataque.">Tipo de envio:<span></td>';var b='<select id="type_sched">';b+='<option value="0">Horario de envio!</option>',b+='<option value="1">Hora de chegada!</option>',b+="</select>",a+="<td>",a+='<span id="arrive" style="display: none"></span>',a+=b,a+="</td>",a+="</tr>",a+="<tr>",a+='<td colspan="2"><span title="Deseja que o Coordenador mantenha esse ataque como prioridade? Caso seja um NT, esse ataque vai ser o primeiro a ser enviado.">Enviar como prioridade?<input type="checkbox" id="priority"><span></td>',a+="</tr>",a+="</tbody>",a+="</table>";var c=$(a),d=$('<input type="button" class="btn btn-attack" value="Coordenar Envio">'),e=$("#command-confirm-form");e.find("table:eq(0)").after(c),e.append(d);var f=$("#send"),g=$("#arrive"),h=$("#edit"),i=$("#type_sched"),j=e.find("table:eq(0) tr:eq(2) td:eq(1)").text();d.on("click",function(){var a=$(this),b={time:$("#edit").val(),type:i.val(),duration:j,priority:$("#priority").is(":checked")},d=Quasar.coordinator.createSchedule(b);if(d.status){f.text(d.cmd_time.formated),f.show(),g.text(d.arrive.formated),g.show(),c.find("tr:eq(1) td:eq(0)").text("Envio aprox. em: "),c.find("tr:eq(2) td:eq(0)").text("Chegada aprox. em: ");var e=c.find("tr:eq(3) td:eq(0)");e.text((d.priority?"Com ":"Sem ")+"prioridade"),e.css("font-weight","bold"),h.hide(),i.hide(),a.hide(),$("#troop_confirm_go").hide()}}),$("#coordinator_table").tooltip({position:{my:"left+15 center",at:"right center",using:function(a){var b=$(this);b.css(a),b.css("z-index",1e5)}},tooltipClass:"tooltip-style",track:!0}),$.getScript(Loader.host+"/jquery.datetimepicker.js",function(){var a={value:Quasar.coordinator.TIMESTAMP_FORMAT(),format:"H:i:s d/m/Y",formatDate:"d/m/Y",formatTime:"H:i:s",minDate:0,step:5};$("#edit").datetimepicker(a)})}}},nucleo:{init:function(){if(console.log("Started"),Quasar.captcha.hasCaptcha())return $("body").append('<object height="50" width="100" data="'+Loader.host+'/alarm.mp3"></object>'),void $(document).prop("title","Preencher Captcha");if(Quasar.lang.init(),null===Quasar.config.get("last_version_used",null)){if("overview_villages"==game_data.screen)return Quasar.overview_villages.saveVillages(),UI.SuccessMessage("Quasar obteve informações obre sua conta e está pronto para uso!"),void Quasar.config.set("last_version_used",Quasar.config.version);Quasar.interface.menu.showWelcome()}else if(Quasar.config.get("last_version_used","")!==Quasar.config.version)UI.SuccessMessage("Detectado uma nova versão do Quasar instalado!"),Quasar.config.set("last_version_used",Quasar.config.version);else{var a=new QJSON("villages",!0),b=game_data.village.coord;a.contains(b)||(a.set(b,game_data.village.id),Quasar.config.set("villages",a.toJSON()))}var c=location.href;Quasar.config.set("total_execucoes",Quasar.config.get("total_execucoes",0)+1);var d=Loader.timeEnd-Loader.timeStart,e=Quasar.config.get("pings",[]);switch(e.push(d),e.length>3&&e.shift(),Quasar.config.set("pings",e),10==Quasar.utils.random(0,10)&&Quasar.nucleo.abrirPaginaAleatoria(),game_data.screen){case"place":$("#troop_confirm_go").length>0?Quasar.coordinator.getStatus()?Quasar.coordinator.init():Quasar.farm.doConfirm():location.href.indexOf("target")>0||(null===game_data.mode||"command"==game_data.mode)&&(game_data.premium&&Quasar.map.updateAR(),null!==Quasar.config.get("before_dodge_page",null)?Quasar.config.set("before_dodge_page",null):Quasar.farm.init()||Quasar.wall.init()||Quasar.farm_post.init(),Quasar.interface.praca());break;case"map":Quasar.map.init();break;case"overview":Quasar.overview.init(),Quasar.dodge.init();break;case"train":Quasar.train.init();break;case"main":Quasar.main.init();break;case"am_farm":Quasar.am_farm.init();break;case"overview_villages":if("prod"==game_data.mode)Quasar.overview_villages.saveVillages();else if("incomings"==game_data.mode&&location.href.indexOf("subtype=attacks")>0){var f=Quasar.config.get("before_identify_page",null);null!==f&&(Quasar.config.set("before_identify_page",null),location.href=f)}break;case"report":c.contains("&view=")&&Quasar.report.view()}Quasar.interface.menu.init(),Quasar.dodge.renameAttacks()},getStatus:function(){return Quasar.config.get("anti_afk",!0)},setStatus:function(a){},abrirPaginaAleatoria:function(){var a=this.getStatus();if(Quasar.config.set("count",0),a){var b="?village="+game_data.village.id+"&screen=",c=["forum","ally","ranking","ranking&mode=con_player","market","smith","statue","farm","barracks","stable","garage","storage","hide","wall"],d=Quasar.utils.random(0,c.length-1),e=c[d];$.get(b+e,function(){})}},importData:function(a){localStorage.setItem(game_data.player.name,a),Loader.goTo()},exportData:function(){return localStorage.getItem(game_data.player.name)}},captcha:{init:function(){this.pageInject(),this.bind()},hasCaptcha:function(){return $("#bot_check_image").length>0},bind:function(){$("#bot_check_form").submit(function(a){a.preventDefault(),code=$("#bot_check_code").val(),$("#bot_check_code").val(""),url="game.php",game_data.player.sitter>0&&(url+="?t="+game_data.player.id),$.post(url,{bot_check_code:code},function(a){alert(a),a.error?($("#bot_check_error").show().text(a.error),$("#bot_check_image").attr("src",function(){var a=$(this).attr("src");return a+="&"+(new Date).getTime()})):location.href=""},"json")})},pageInject:function(){$(document).prop("title","Preencher Captcha");
var a=Loader.host+"/alarm.mp3",b=50,c=new Audio;c.src=a,c.volume=b/100,Quasar.config.get("sound_alarm",!0)&&(window.setInterval(c.play,3e4),c.play())}},coordinator:{init:function(){Quasar.interface.coordinator.start()},startTimer:function(a,b,c,d,e,f){if(!(Quasar.utils.IsNumeric(a.val())&&Quasar.utils.IsNumeric(b.val())&&Quasar.utils.IsNumeric(c.val())&&Quasar.utils.IsNumeric(d.val())))return void alert("Erro no formato do texto");var g=new Date,h=new Date;h.setMilliseconds(d.val()),h.setMinutes(b.val()),h.setSeconds(c.val()),h.setHours(a.val()),e.text(h.toTimeString()),e.show(),f.hide(),setTimeout(function(){console.log("Attacked"),$("#troop_confirm_go").click()},h.getTime()-g.getTime())},createSchedule:function(a){var b=this.FORMAT_TIMESTAMP(a.time),c=this.TIME_TO_MILLESECONDS(a.duration),d=0,e={status:!1};if(0==a.type?d=b:1==a.type&&(d=b-c),a.priority&&(d-=300),0==d)return UI.ErrorMessage("O horario de envio não foi devidamente definido."),e;if(d<=this.currentTime())return UI.ErrorMessage("O horario de envio já passou! "+this.TIMESTAMP_FORMAT(d),5e3),e;var f=d-this.currentTime();if(f>=2147483648)return UI.ErrorMessage("Tempo de agendamento excedeu o limite permitido. 590 horas é o limite.",5e3),e;$element=$("#troop_confirm_go"),setTimeout(function(){$element.click()},f),UI.SuccessMessage("Ataque agendado com sucesso! Mantenha essa aba do navegador aberta.");var g={status:!0,cmd_time:{normal:d,formated:this.TIMESTAMP_FORMAT(d)},arrive:{normal:d+c,formated:this.TIMESTAMP_FORMAT(d+c)},priority:a.priority};return g},currentTime:function(){$sd=$("#serverDate"),$st=$("#serverTime");var a=$sd.text().split("/");return new Date(a[1]+"/"+a[0]+"/"+a[2]+" "+$st.text()).getTime()},TIME_TO_MILLESECONDS:function(a){var a=a.split(":"),b=3600*+a[0],c=60*+a[1],d=+a[2];return 1e3*(b+c+d)},TIMESTAMP_FORMAT:function(a){a||(a=this.currentTime());var b=new Date(a),c=b.getHours(),d=b.getMinutes(),e=b.getSeconds(),f=b.getDate(),g=b.getMonth()+1,h=b.getFullYear();return c=10>c?"0"+c:c,d=10>d?"0"+d:d,e=10>e?"0"+e:e,f=10>f?"0"+f:f,g=10>g?"0"+g:g,c+":"+d+":"+e+" "+f+"/"+g+"/"+h},FORMAT_TIMESTAMP:function(a){var b=a.split(" "),c=b[1].split("/");return a=b[0],new Date(c[1]+"/"+c[0]+"/"+c[2]+" "+a).getTime()},getStatus:function(){return Quasar.config.get("coordinator",!1)},setStatus:function(a){Quasar.config.set("coordinator",a)}},main:{niveis:{},init:function(){Quasar.interface.ed_principal.start();var a=BuildingMain.update_all;BuildingMain.update_all=function(b){a(b),console.log("Building Update event"),Quasar.main.start()},this.start(),Quasar.utils.setReload("&screen=main")},start:function(){Quasar.interface.ed_principal.addBuildIcon(),this.load(),this.build()},build:function(){if(Quasar.main.getStatus()){var a=Quasar.config.get("queue_"+game_data.village.id,[]);if(a.length>0){var b=a[0];$("#main_buildlink_"+b).is(":visible")&&BuildingMain.order_count<this.getMax()&&(a.shift(),Quasar.config.set("queue_"+game_data.village.id,a),this.load(),BuildingMain.build(b),setTimeout(Quasar.main.build,1e3))}}},getMax:function(){return"undefined"==typeof premium||premium===!1?2:Number(Quasar.config.get("max_build_queue",5))},getCurrentNivel:function(a){var b=$("#buildqueue .buildorder_"+a);if(b.length>0)return Number(b.last().find("td:eq(0)").text().match(/\d+/g)[0]);var c=$("#main_buildrow_"+a),d=c.find("span:eq(0)").text().match(/\d+/g),e=Number(c.find("#newNivel").text().match(/\d+/g));if(null!==d){var f=Number(d[0]);return f==e?0:f}return 0},getStatus:function(){return Quasar.config.get("auto_build",!1)},setStatus:function(a){Quasar.config.set("auto_build",a)},load:function(){for(var a,b=Quasar.config.get("queue_"+game_data.village.id,[]),c=[],d=0;d<b.length;d++)a=b[d],""!==a&&null!==a&&"undefined"!=typeof a&&"undefined"!=typeof Quasar.game.builds[a]&&c.push(a);this.niveis={},Quasar.interface.ed_principal.cleanTables(),$("#main_order").html(""),$("#number").text(c.length);for(var e,f,d=0;d<c.length;d++)f=c[d],e="undefined"!=typeof this.niveis[f]?Number(this.niveis[f])+1:this.getCurrentNivel(f)+1,this.niveis[f]=e,Quasar.interface.ed_principal.addToList(f,e,d);Quasar.interface.ed_principal.makeSortable()},order:function(){var a=Quasar.config.get("queue_"+game_data.village.id,[]);this.niveis={};for(var b,c,d=[],e=0;e<a.length;e++)if(c=a[e],""!=c||null!=c||"undefined"!=typeof c||"undefined"!=typeof Quasar.game.builds[c]){b=a[e],nivel="undefined"!=typeof this.niveis[b]?Number(this.niveis[b])+1:this.getCurrentNivel(b)+1,this.niveis[b]=nivel;var f=Quasar.game.builds[b],g=parseInt(f.wood*Math.pow(f.fwood,nivel-1)),h=parseInt(f.stone*Math.pow(f.fstone,nivel-1)),i=parseInt(f.iron*Math.pow(f.firon,nivel-1)),j=g+h+i;d.push([b,j])}a=[];for(var e=0;e<d.length;e++){for(var k=e;k<d.length;k++)if(d[k][1]<d[e][1]){var l=d[e];d[e]=d[k],d[k]=l}a.push(d[e][0])}Quasar.config.set("queue_"+game_data.village.id,a),Quasar.main.load()}},map:{size:0,_handleClick:null,coords:[],init:function(){this._handleClick=TWMap.map._handleClick;var a=TWMap.mapHandler.onResizeEnd;TWMap.mapHandler.onResizeEnd=function(){a(),this.doAr()},Quasar.map.UI.init(),Quasar.map.doAR()},updateAR:function(){if(!premium){var a,b,c=[],d=[],e=!0;a="overview"!==game_data.screen?$("table.vis").last().find("tbody tr"):$("table.vis").first().find("tbody tr"),$(a).each(function(){if(e)return void(e=!1);{var a=$(this),f=a.find("img").attr("src"),g=a.find("td:eq(0) span span").text();a.find("td:eq(1)").text()}g.contains("(")&&(b=g.split("(")[1].split(")")[0].replaces("|",""),f.indexOf("return")>-1?-1==c.indexOf(b)&&c.push(b):f.indexOf("attack")>-1&&-1==d.indexOf(b)&&d.push(b))}),Quasar.config.set("map_attacks",d),Quasar.config.set("map_returns",c)}},doSC:function(){for(var a=Quasar.config.get("coords_"+game_data.village.id,[]),b=0;b<a.length;b++)a[b]=Quasar.utils.coordToId(a[b].replaces("|",""));$('[id*="map_village_"]').each(function(){var b=$(this).attr("id").replace("map_village_","");if(a.indexOf(b)>-1){var c=$("#map_village_"+b);c.before('<img class="map_icon_showcoord" style="top: '+c.css("top")+"; left: "+c.css("left")+'; " id="map_icons_'+b+'" src="/graphic/dots/blue.png">')}})},doAR:function(){if(!premium){var a=Quasar.config.get("map_attacks",[]),b=Quasar.config.get("map_returns",[]),c=0;for(c=0;c<a.length;c++)a[c]=Quasar.utils.coordToId(a[c]);for(c=0;c<b.length;c++)b[c]=Quasar.utils.coordToId(b[c]);$('[id*="map_village_"]').each(function(){var c=$(this).attr("id").replace("map_village_","");if(0===$("#map_icons_"+c+".map_icon_3_1").length){var d;b.indexOf(c)>-1&&(d=$("#map_village_"+c),d.before('<img class="map_icon_return"style="top: '+d.css("top")+"; left: "+d.css("left")+';" id="map_icons_'+c+'" src="/graphic/map/return.png">')),a.indexOf(c)>-1&&(d=$("#map_village_"+c),d.before('<img class="map_icon_attack" style="position: absolute; top: '+d.css("top")+"; left: "+d.css("left")+'" id="map_icons_'+c+'" src="/graphic/map/attack.png">'))}})}},handleClick:function(a){var b=$("#quasar-colector textarea"),c=this.coordByEvent(a),d=TWMap.villages[c.join("")];if("undefined"!=typeof d)if(c=c.join("|"),Quasar.map.coords.indexOf(c)<0){Quasar.map.coords.push(c),b.val(Quasar.map.coords.join(" ")),$("#qtdCoords").text(Quasar.map.coords.length);var e=$("#map_village_"+d.id);e.before('<img class="map_icon_collect" style="top: '+e.css("top")+"; left: "+e.css("left")+'; " id="map_icons_'+d.id+'" src="/graphic/dots/red.png">')}else Quasar.map.coords.splice(c,1),b.val(Quasar.map.coords.join(" ")),$("#qtdCoords").text(Quasar.map.coords.length),$("#map_icons_"+d.id+".map_icon_collect").remove();return!1},resize:function(a){premium||(Quasar.config.set("map_size",a),TWMap.resize(a),this.size=a)},UI:{ele_quasar:null,init:function(){$("#map_config").after('<br><table class="vis" width="100%" style="border-spacing:0px;border-collapse:collapse;"><tbody id="quasarMap"><tr><th colspan="3">Quasar Options</th></tr></tbody></table><br/><table class="vis" width="100%" id="quasar-colector" style="display:none;"><tr><th>Coords(<span id="qtdCoords">0</span>)</th></tr><tr><td style="text-align:center"><textarea style="width:100%;background:none;border:none;resize:none;font-size:11px;"></textarea></td></tr></table>'),$("#fullscreen").attr("style","display: block;").attr("onclick","TWMap.premium = true; TWMap.goFullscreen();").attr("title","FullScreen - Quasar Bot"),this.ele_quasar=$("#quasarMap"),this.appendMenu('<a id="btn_colect" class="btn">'+Quasar.lang.get("colect_coords")+"</a>"),this.appendMenu('<a id="btn_showcoords" class="btn">'+Quasar.lang.get("show_coords")+"</a>"),$("#btn_colect").on("click",function(){var a=$(this).attr("class");"btn"===a?($("#quasar-colector").show(500),TWMap.map._handleClick=Quasar.map.handleClick,$(this).attr("class","btn btn-confirm-yes")):($("#quasar-colector").hide(500),$(".map_icon_collect").remove(),Quasar.map.coords=[],$("#quasar-colector textarea").val(""),$("#qtdCoords").text(Quasar.map.coords.length),TWMap.map._handleClick=Quasar.map._handleClick,$(this).attr("class","btn"))}),$("#btn_showcoords").on("click",function(){var a=$(this).attr("class");"btn"===a?(Quasar.map.doSC(),$(this).attr("class","btn btn-confirm-yes")):($(".map_icon_showcoord").remove(),$(this).attr("class","btn"))}),Quasar.map.UI.premiumChanges()},appendMenu:function(a){this.ele_quasar.append("<tr><td align='center'>"+a+"</td></tr>")},premiumChanges:function(){if(!premium){this.appendMenu(Quasar.lang.get("map_size")+': <select id="size-change" style="width: 65px"><option value="4">4x4</option><option value="5">5x5</option><option value="7">7x7</option><option value="9">9x9</option><option value="11">11x11</option><option value="13">13x13</option><option value="15">15x15</option><option value="20">20x20</option><option value="30">30x30</option></select>');var a=Quasar.config.get("map_size",13),b=$("#size-change");b.val(a),Quasar.map.resize(a),b.on("change",function(){var a=Number($(this).val());Quasar.map.resize(a)})}}}},overview:{init:function(){Quasar.map.updateAR(),Quasar.overview.UI.init()},UI:{init:function(){premium||this.premiumChanges()},premiumChanges:function(){var a='<div id="show_notes" class="vis moveable widget" style="display:none;"><h4 class="head"><img style="float: right; cursor: pointer;" src="graphic/minus.png">'+Quasar.lang.get("village_notes")+'</h4><div class="widget_content" style="display: block;"><table width="100%"><tbody><tr><td id="village_note"></td></tr><tr><td><a id="edit_notes_link" href="javascript:void(0);">» Editar</a></td></tr></tbody></table></div></div>';$("#show_summary").after(a),Quasar.overview.UI.load_notes(),$("#show_notes").show(1e3),$("#edit_notes_link").on("click",function(){Quasar.overview.UI.edit_notes($("#village_note"),Quasar.lang.get("village_notes"))})},load_notes:function(){var a=new QJSON("notes",!0),b=game_data.village.id,c=null!==a.get(b)?a.get(b):"";$("#village_note").html(c)},edit_notes:function(a,b){var c=new QJSON("notes",!0),d=game_data.village.id,e=null!==c.get(d)?c.get(d).replace(/<br>/g,"\n"):"";b=Quasar.lang.get("village_notes");var f='<div><textarea id="message" name="note" rows="10" cols="40">'+e+'</textarea></div><div><input type="button" id="ok_note" value="OK" class="btn"></div>',g=function(){$("#ok_note").on("click",function(){var a=$("#message").val().replace(/\n/g,"<br>"),b=new QJSON("notes",!0);b.set(game_data.village.id,a),Quasar.config.set("notes",b),Quasar.overview.UI.load_notes()})};Quasar.interface.menu.popupBox(b,f,400,null,g)}}},overview_villages:{init:function(){this.UI.init(),this.saveVillages()},saveVillages:function(){var a=new QJSON("villages",!0);$("#production_table .row_a, #production_table .row_b").each(function(){var b=$(this),c="[0-9]{1,3}\\|[0-9]{1,3}",d=b.find(".quickedit-label").text();d=d.match(c)[0];var e=b.find(".quickedit-vn").attr("data-id");a.set(d,e)}),Quasar.config.set("villages",a.toJSON())},changeName:function(a,b){$.post("?village="+a+"&action=change_name&h=ddbf&screen=main",{name:b},function(){console.log("FUN")})},UI:{init:function(){}}},farm_post:{can:!0,init:function(){return Quasar.farm_post.getStatus()?($(".troop_template_selector").each(function(){return $(this).click(),Quasar.farm_post.canAttack()?Quasar.farm_post.doAttack():void 0}),Quasar.utils.setReload("&screen=place"),!1):!1},canAttack:function(){var a=Quasar.config.get("coords_"+game_data.village.id,[]);return a.length<1?!1:($("input[class='unitsInput']").each(function(){var a=$(this).val(),b=$(this).parent().find("a").text();b=b.replaces("(",""),b=b.replaces(")",""),b=Number(b),null!==a&&""!==a&&a>b&&(Quasar.farm_post.can=!1)}),Quasar.farm_post.can)},cleanInputs:function(){$("input[class='unitsInput']").each(function(){var a=Number($(this).val()),b=$(this).parent().find("a:eq(1)").text();b=b.replaces("(",""),b=b.replaces(")",""),b=Number(b),null!==a&&""!==a&&0!==a&&(a>b||$(this).parent().find("a:eq(1)").text("("+(b-a)+")"))})},doAttack:function(){var a=Quasar.config.get("index_"+game_data.village.id,0)+1,b=Quasar.config.get("coords_"+game_data.village.id,[]);if(b.length<1)return!1;if(a>b.length-1){var c=Quasar.config.get("stop_end_farm",!1);if(c)return;a=0}Quasar.config.set("index_"+game_data.village.id,a),Quasar.farm.addAttack(),$("#current").text(a);var d=game_data.village.id,e=b[a],f={x:e.split("|")[0],y:e.split("|")[1],attack:!0};for(var g in Quasar.game.units){var h=Number($("#unit_input_"+g).val());f[g]=h}return Quasar.farm_post.cleanInputs(),$.ajax({url:"?village="+d+"&try=confirm&screen=place",type:"post",data:f,success:function(a){if($('img[src="?captcha"]',a).length||$("#error",a).length)return Quasar.farm_post.can=!1,!1;var b=$("form",a);$.post(b[0].action,b.serialize(),function(a){return $('img[src="?captcha"]',a).length||$("#error",a).length?(Quasar.farm_post.can=!1,!1):void 0})}}),!0},getStatus:function(){return Quasar.config.get("auto_farm_post",!1)},setStatus:function(a){Quasar.config.set("auto_farm_post",a),a&&(Quasar.farm.setStatus(!1),$("#auto_farm").removeClass("active"))}},farm:{init:function(){if(!Quasar.farm.getStatus())return!1;var a=!1;return $(".troop_template_selector").each(function(){return a?!0:($(this).click(),void(Quasar.farm.canAttack()&&(a=Quasar.farm.doAttack())))}),Quasar.utils.setReload("&screen=place"),!1},canAttack:function(){var a=!0,b=Quasar.config.get("coords_"+game_data.village.id,[]);return b.length<1?!1:($("input[class='unitsInput']").each(function(){var b=$(this).val(),c=$(this).parent().find("a").text();c=c.replaces("(",""),c=c.replaces(")",""),null!==b&&""!==b&&Number(c)<b&&(a=!1)}),a)},doAttack:function(){var a=Quasar.config.get("index_"+game_data.village.id,0)+1,b=Quasar.config.get("coords_"+game_data.village.id,[]);if(b.length<1)return!1;if(a>b.length-1){var c=Quasar.config.get("stop_end_farm",!1);if(c)return;a=0}var d=b[a];return $("input[name='input']").val(d),Quasar.config.set("index_"+game_data.village.id,a),Quasar.farm.addAttack(),setTimeout(function(){$("#target_attack").click()},Quasar.utils.random(500,2500)),!0},doConfirm:function(){setTimeout(function(){$("#troop_confirm_go").click()},Quasar.utils.random(500,2500))},addAttack:function(){var a=new QJSON("attacks",!0),b=$("#serverDate").text();if(a.contains(b)){var c=a.get(b)+1;a.set(b,c)}else a.add(b,0);Quasar.config.set("attacks",a.toJSON())},getStatus:function(){return Quasar.config.get("auto_farm",!1)},setStatus:function(a){Quasar.config.set("auto_farm",a),a&&(Quasar.farm_post.setStatus(!1),$("#auto_farm_post").removeClass("active"))}},report:{init:function(){Quasar.report.UI.init()},UI:{init:function(){$("#content_value").prepend('<div id="menu_script" style="display:none;"><table class="vis nowrap tall" style="width: 100%"><tr><th style="width: 66%">Menu</th></tr><tr><td><input id="clean" class="btn" type="button" value="Clean Villages"></td></tr></table></div>');var a="";$("btn_wall_drop").on("click",function(){Quasar.wall.attack(a[0],a[1])}),$("#menu_script").show(1e3)}},view:function(){var a=$("#attack_info_def .village_anchor a");if(!(a.length<1)){var b=a.text().split("(")[1].split(")")[0],c=$('<td><img src="/graphic/buildings/wall.png" title="Add to drop list"/></td>').on("click",function(){Quasar.wall.save(b,$(this))}),d=$('<td><img src="/graphic/map/attack.png" title="Add to farm list"/></td>').on("click",function(){var a=Quasar.config.get("coords_"+game_data.village.id,[]);!a.indexOf(b)>-1?(a.push(b),Quasar.config.set("coords_"+game_data.village.id,a),$(this).addClass("success")):$(this).addClass("fail")}),e=$('<td><img src="/graphic/map/return.png" title="Remove from farm list"/></td>').on("click",function(){var a=Quasar.config.get("coords_"+game_data.village.id,[]);a.indexOf(b)>-1?(a.splice(b,1),Quasar.config.set("coords_"+game_data.village.id,a),$(this).addClass("success")):$(this).addClass("fail")}),f=$("tr:first","#attack_results ");f.append(c),f.append(d),f.append(e)}}},wall:{init:function(){if(!Quasar.wall.getStatus())return!1;var a=this.getUnits(),b=Quasar.config.get("wall_coords",[]);if(b.length<=0||!Quasar.wall.hasUnits())return!1;Quasar.wall.cleanInputs();for(var c=0;c<a.length;c++)$("#unit_input_"+a[c][0]).val(a[c][1]);var d=Quasar.utils.orderByDis(game_data.village.coord,b),e=d[0];return $("input[name='input']").val(e),d.shift(),Quasar.config.set("wall_coords",d),$("#target_attack").click(),!0},cleanInputs:function(){$(".unitsInput").each(function(){$(this).val(0)})},getUnits:function(){var a=[];return a.push(["spy",Quasar.config.get("wall_drop_spy",1)]),a.push(["ram",Quasar.config.get("wall_drop_ram",15)]),a.push(["axe",Quasar.config.get("wall_drop_axe",30)]),a},hasUnits:function(){for(var a=this.getUnits(),b=0;b<a.length;b++){var c=$("#unit_input_"+a[b][0]).next("a").text().match(/\d+/g)[0];if(Number(c)<Number(a[b][1]))return!1}return!0},canAttack:!0,attack:function(a,b,c){if(!Quasar.wall.canAttack)return void $("#"+c).parent().addClass("fail");var d=game_data.village.id,e={x:a,y:b,attack:!0};for(var f in Quasar.game.units)e[f]=0;e.spy=Quasar.config.get("wall_drop_spy",1),e.ram=Quasar.config.get("wall_drop_ram",15),e.axe=Quasar.config.get("wall_drop_axe",45),$.ajax({url:"?village="+d+"&try=confirm&screen=place",type:"post",data:e,success:function(a){if($('img[src="?captcha"]',a).length||$("#error",a).length)return $("#"+c).parent().addClass("fail"),Quasar.wall.canAttack=!1,!1;var b=$("form",a);$.post(b[0].action,b.serialize(),function(){return $('img[src="?captcha"]',a).length||$("#error",a).length?($("#"+c).parent().addClass("fail"),Quasar.wall.canAttack=!1,!1):void $("#"+c).parent().addClass("success")})}})},save:function(a,b){var c=Quasar.config.get("wall_coords",[]);-1===c.indexOf(a)?(c.push(a),Quasar.config.set("wall_coords",c),b.addClass("success")):b.addClass("fail")},getStatus:function(){return Quasar.config.get("break_wall")},setStatus:function(a){Quasar.coordinator.getStatus()&&a&&(Quasar.coordinator.setStatus(!1),UI.SuccessMessage("O coordenador foi desativado para não gerar conflito com o derrubador de muralhas."),Quasar.coordinator.$element.removeClass("active")),Quasar.config.set("break_wall",a)}},am_farm:{jump:!1,cicle:0,rows:0,init:function(){Quasar.am_farm.UI.init(),Quasar.am_farm.getStatus()&&(Quasar.am_farm.doAttacks(),Quasar.utils.setReload("&order=distance&dir=asc&screen=am_farm"))},doAttacks:function(){var a=0,b=Quasar.config.get("am_is_by_ratio",!1),c=Number(Quasar.config.get("max_am_attacks",2)),d=Number(Quasar.config.get("am_dis_ratio",1)),e=Quasar.config.get("attack_control",!1),f=Number(Quasar.config.get("max_am_dis",20)),g=Quasar.config.get("blue_reports",!1),h=Quasar.config.get("yellow_reports",!0),i=Quasar.config.get("use_c_am",!0),j=Number(Quasar.config.get("max_am_wall",3)),k=Quasar.am_farm.getTemplateRes("0"),l=Quasar.config.get("delete_most_attacked",!1),m=$(".row_a:visible, .row_b:visible","#am_widget_Farm");m.each(function(n){var o=$(this);a+=Quasar.utils.random(300,500),setTimeout(function(){if($(".error").length>0&&$(".error").length&&(Quasar.am_farm.jump=!0),!Quasar.am_farm.jump){Quasar.am_farm.rows++;var a=Quasar.am_farm.cicle;n!=m.length-1||!b&&a>c&&b&&a>d*f||(Quasar.am_farm.cicle++,setTimeout(Quasar.am_farm.doAttacks,500));var p=(o.attr("class").split(" ")[0],o.find("td:eq(0) a")),q=o.find(".farm_icon_a"),r=o.find(".farm_icon_b"),s=o.find(".farm_icon_c"),t="[0-9]{1,3}\\|[0-9]{1,3}",u=o.find("td:eq(3) a").text().match(t)[0],v=0;o.find("td:eq(5) .res").each(function(){v+=Number($(this).text().replace(".",""))});var w=Number("?"==o.find("td:eq(6)").text()?-1:o.find("td:eq(6)").text()),x=!1,y=o.find("td:eq(2) img");y.length>0&&(x=null!==y.attr("src").match(/1.png/g)?!0:!1);var z=(null!==o.find("td:eq(1) img").attr("src").match(/green.png/g)?!0:!1,null!==o.find("td:eq(1) img").attr("src").match(/blue.png/g)?!0:!1),A=null!==o.find("td:eq(1) img").attr("src").match(/yellow.png/g)?!0:!1,B=null!==o.find("td:eq(1) img").attr("src").match(/red.png/g)?!0:!1,C=Number(o.find("#attacks").text()),D=Number(o.find("td:eq(7)").text());if(e&&C>Quasar.am_farm.cicle)return!1;if(D>f)return!1;if(b&&C>=d*D&&0!==C)return l&&p.click(),!1;if(!b&&C>=c)return l&&p.click(),!1;if(B)return p.click(),!0;if(z&&!g)return!1;if(A&&h&&-1==w||w>j)return 0===C&&Quasar.wall.save(u,o.find("#wall").parent()),!1;if(s.length>0&&i)0===C&&v>=k&&(s.click(),Quasar.farm.addAttack());else if(q.length>0&&Quasar.am_farm.hasTroop("0"))q.click(),Quasar.farm.addAttack();else{if(!(r.length>0&&Quasar.am_farm.hasTroop("1")))return!0;r.click(),Quasar.farm.addAttack()}o.hide()}},a)})},hasTroop:function(a){var b=!0;return $("form:eq("+a+") tr:eq(1) input").each(function(){var a=$(this).attr("name"),c=Number($(this).val()),d=Number($("#units_home #"+a).text());c>d&&(b=!1)}),b},getTemplateRes:function(a){return Number($("form:eq("+a+") tr:eq(1) td:eq(6)").text())},UI:{init:function(){$("#plunder_list tbody tr:eq(0) ").append('<th><img src="/graphic/buildings/wall.png?"/></th><th><img src="/graphic/command/attack.png"/></th>');var a=0;$(".row_a, .row_b").each(function(){a+=100;var b=$(this);setTimeout(function(){var a=(b.attr("class").split(" ")[0],"[0-9]{1,3}\\|[0-9]{1,3}"),c=b.find("td:eq(3) a").text().match(a)[0],d=b.find("td:eq(3) img"),e=0;d.length>0&&(d.mouseover(),e=$("#tooltip h3").text().replace(/\D/g,""),d.mouseout());var f=$('<td><img id="wall" src="/graphic/buildings/wall.png?"/></td>').on("click",function(){Quasar.wall.save(c,$(this))});b.append(f),b.append('<td id="attacks">'+e+"</td>")},a)})}},getStatus:function(){return Quasar.config.get("am_farm",!1)},setStatus:function(a){Quasar.config.set("am_farm",a)}},dodge:{init:function(){Quasar.dodge.getStatus()&&game_data.player.incomings>0&&null!==Quasar.dodge.getDodgeVillage()&&(this.UI.showAlert(),this.attack()),this.cancel(),Quasar.utils.setReload("&screen=overview")},renameAttacks:function(){if(game_data.player.premium){var a=Quasar.config.get("incoming_attacks",0);a<game_data.player.incomings&&Quasar.interface.menu.popupBox("Incoming attacks","Loading page...",1200,null,function(){$("#quasar_popup").load("?village="+game_data.village.id+"&mode=incomings&subtype=attacks&screen=overview_villages",function(a){var b=$(a);Quasar.config.set("before_identify_page",location.href),b.find("#select_all").click(),b.find("#incomings_form input[name='label']").click()})}),a!=game_data.player.incomings&&Quasar.config.set("incoming_attacks",game_data.player.incomings)}},cancel:function(){},attack:function(){var a=Quasar.dodge.getAttackTime();null!==a&&(60>=a?Quasar.dodge.sendAttack():setTimeout(function(){Quasar.dodge.sendAttack()},1e3*(a-60)))},sendAttack:function(){Quasar.interface.menu.popupBox("Dodging","Loading page...",1200,null,function(){Quasar.config.set("before_dodge_page",location.href),$("#quasar_popup").load("?village="+game_data.village.id+"&screen=place",function(a){var b=$(a),c=Quasar.dodge.getAttackVillage();null!==c&&(b.find("input[name='input']").val(c),b.find(".unitsInput").each(function(){var a=$(this),b=a.next("a").html(),c=b.substr(1).substr(0,b.length-2);a.val(c)}),b.find("#target_attack").click())})})},hasTroop:function(){var a=!1;return $(".unitsInput").each(function(){var b=$(this);return""!==b.val()&&Number(b.val())>0?(a=!0,!1):void 0}),a},UI:{showAlert:function(){if(Quasar.dodge.getStatus()&&game_data.player.incomings>0){var a=$("#dodge");a.hasClass("alert")?a.removeClass("alert"):a.addClass("alert"),setTimeout(Quasar.dodge.UI.showAlert,1e3)}}},getDodgeVillage:function(){return Quasar.config.get("dodge_target",null)},getAttackTime:function(){var a=$(".no_ignored_command:first");if(a.length>0){var b=a.find("td:eq(2) span").text();return Quasar.utils.stringToSec(b)}return null},getStatus:function(){return Quasar.config.get("dodge",!1)},setStatus:function(a){Quasar.config.set("dodge",a)}},lang:{init:function(){this.cache=Quasar.config.get("language","br")},cache:"br",get:function(a){var b=Quasar.lang[this.cache];if("undefined"==typeof b||null==b)return a;var c=b[a];return"undefined"==typeof c?a:c},br:{save:"Salvar",count:"Contador",language:"Portugues",yes:"sim",no:"nao",auto_farm:"Farmador",auto_farm_post:"Farmador Silencioso",auto_recruit:"Recrutador",anti_afk:"Anti-Captcha",auto_build:"Construtor",coordinator:"Coordenador",dodge:"Dodge",planner:"Planejador (Preview)",update_notes:"Sobre",wall_drop:"Derrubar muralha",am_farm:"Auto AS",attacks_today:"Ataques hoje",order_recruit:"Ordem",option:"Opções",units:"Unidades",opt_title:"Opções de recrutamento",build_queue:"Fila de construção",build_level:"Nivel",price:"Custo",hide_link:"Esconder",show_link:"Mostrar",builds:"Contruções",add_icon_title:"Adicionar a fila",remove_icon_title:"Remover da fila",villages:"Aldeias",order:"Ordenar",clean:"Limpar",anti_afk_msg:"Para o anti-captcha funcionar corretamente é necessario desbloquear os\npopups do site no seu navegador.",village_notes:"Notas da aldeia",colect_coords:"Coletar coordenadas",show_coords:"Mostrar coordenadas",map_size:"Tamanho do mapa",configuration:"Configuracoes",welcome_window:"Boas vindas",import_export:"Importar/Exportar"}},train:{_temp_storage:{},init:function(){if(Quasar.train.UI.init(),Quasar.train.getStatus()){if(this.fillUnitTimes(),this.isSequential())Quasar.train.sequentialRecruitment(),Quasar.train.UI.updateType();else{Quasar.train.numericalRecruitment(0),Quasar.train.UI.updateType();var a=$("input[type='submit']");a.hasClass("btn-recruit-disabled")||a.click()}Quasar.utils.setReload("&screen=train")}},fillUnitTimes:function(){var a=this;$("div.recruit_req").each(function(){var b=$(this),c=b.find("span:last"),d=c.attr("id").split("_"+unit_build_block.village_id+"_cost_time")[0],e=Quasar.utils.stringToSec(c.text()),f=b.parent().parent().find("td:eq(2)"),g=f.text().split("/")[1],h={many:g,time:e};a._temp_storage[d]=h})},isSequential:function(){return Quasar.config.get("sequential_recruitment",!0)},queueLimite:function(){return 60*Number(Quasar.config.get("max_recruit_time",8))*60},numericalRecruitment:function(a){var b=Quasar.config.get("recruitment_numerical_"+game_data.village.id,[]);if(!(b.length<1||a>b.length-1)){var c,d=b[a][0],e=Number(b[a][1]),f=Quasar.game.units[d].ed,g=this._temp_storage[d],h="undefined"!=typeof g?g.time:0,i="undefined"!=typeof g?g.many:0,j=$("#"+d+"_"+unit_build_block.village_id);if(j.length>0){var k=Number($("#"+d+"_"+unit_build_block.village_id+"_a").text().replaces(")","").replaces("(",""));if(k>0&&this.queueLimite()>0&&e>=i){c=k>=e?e:k;var l=h*c;for(console.log(d,c,"time: ",h,"queue",this.getQueueTime(f));this.getQueueTime(f)+l>this.queueLimite()&&c>0;)l=h*--c;c>0&&(j.val(c),unit_build_block._onchange())}}this.numericalRecruitment(++a)}},sequentialRecruitment:function(){var a=Quasar.config.get("recruitment_sequential_"+game_data.village.id,[]),b=Quasar.config.get("train_index_"+game_data.village.id,0);if(!(a.length<1)){b>a.length-1&&(b=0);var c=a[b],d=Quasar.game.units[c].ed,e=$("#"+c+"_"+unit_build_block.village_id);if(e.length>0){var f=Number($("#"+c+"_"+unit_build_block.village_id+"_a").text().replaces(")","").replaces("(",""));if(f>=1){var g=Number(e.val())+1,h=this._temp_times[c],i=h*g;if(this.getQueueTime(d)+i<this.queueLimite()){e.val(g),Quasar.config.set("train_index_"+game_data.village.id,++b),unit_build_block._onchange(),this.sequentialRecruitment();var j=$("input[type='submit']");return void(j.hasClass("btn-recruit-disabled")||(j.click(),setTimeout(Loader.goTo,2e3)))}}}}},getQueueTime:function(a){if($("#trainqueue_"+a).length<1)return 0;var b=0;$("#trainqueue_"+a+" .sortable_row").each(function(){var a=$(this).find("td:eq(1)").text();b+=Quasar.utils.stringToSec(a)});var c=this;return $(".recruit_unit").each(function(){var d=$(this);if(""!=d.val()&&0!=d.val()){var e=d.attr("name");Quasar.game.units[e].ed==a&&(b+=c._temp_storage[e].time)}}),b+=Quasar.utils.stringToSec($("#trainqueue_wrap_"+a+" td:eq(1)").text())},getStatus:function(){return Quasar.config.get("auto_train",!1)},setStatus:function(a){Quasar.config.set("auto_train",a)},updateRecruiment:function(){if(Quasar.train.isSequential()){var a=$("#sortable1").sortable("toArray");a.shift(),Quasar.config.set("recruitment_sequential_"+game_data.village.id,a)}else{var b=[];$("#sortable1").find("span").each(function(){var a=$(this);b.push([a.attr("id"),a.attr("data-badge")])}),Quasar.config.set("recruitment_numerical_"+game_data.village.id,b)}this.UI.updateType()},UI:{init:function(){var a=$('<table width="100%" class="content-border vis nowrap tall" style="opacity:0;"><tr><th style="width: 40%">'+Quasar.lang.get("order_recruit")+"( Limitado em "+Quasar.config.get("max_recruit_time",8)+' horas) [ <a href="#" id="import">Importar</a> | <a href="#" id="export">Exportar</a> ]</th><th style="width: 40%" >'+Quasar.lang.get("units")+'</th><th style="width: 20%"></th></tr><tr><td><div id="sortable1" style="width: 100%"><img src="graphic/buildings/barracks.png"></div></td><td><div id="sortable2"></div></td><td id="recruitmentType"></td></tr></table></br>');$("#contentContainer").before(a);var b=Quasar.train.isSequential();$sequencial=$('<label><input type="radio" name="type" '+(b?"checked":"")+">Sequêncial</label>").on("click",function(){Quasar.config.set("sequential_recruitment",!0),Quasar.train.UI.updateType()}),$quantitativo=$('<label><input type="radio" name="type" '+(b?"":"checked")+">Quantitativo</label>").on("click",function(){Quasar.config.set("sequential_recruitment",!1),Quasar.train.UI.updateType()}),$recruitType=$("#recruitmentType"),$recruitType.append($sequencial),$recruitType.append("</br>"),$recruitType.append($quantitativo),Quasar.train.UI.updateType(),a.fadeTo(1e3,1)},updateType:function(){var a,b=$("#sortable1"),c=$("#sortable2"),d=null,e=null;b.html(""),c.html("");for(a in Quasar.game.units)d=Quasar.game.units[a].name,c.append('<span id="'+d+'"><img src="/graphic/unit/recruit/'+d+'.png"></span>');if(b.append('<img src="graphic/buildings/barracks.png">'),Quasar.train.isSequential()){e=Quasar.config.get("recruitment_sequential_"+game_data.village.id,[]);for(a in e)d=e[a],b.append('<span id="'+d+'"><img src="/graphic/unit/recruit/'+d+'.png"></span>');$("#sequential").attr("checked","checked")}else{e=Quasar.config.get("recruitment_numerical_"+game_data.village.id,[]);for(a in e){d=e[a][0];var f=e[a][1];b.append('<span id="'+d+'" class="badge1" data-badge="'+f+'"><img src="/graphic/unit/recruit/'+d+'.png"></span>')}$("#numerical").attr("checked","checked")}b.sortable({placeholder:"ui_active",forcePlaceholderSize:!0,cursor:"move",revert:!0,tolerance:"pointer",connectWith:"#sortable2",stop:function(a,b){$item=b.item,"sortable2"==$item.parent().attr("id")&&$item.remove(),Quasar.train.updateRecruiment()}}).disableSelection(),c.sortable({placeholder:"ui_active",forcePlaceholderSize:!0,cursor:"move",revert:!0,tolerance:"pointer",connectWith:"#sortable1",stop:function(a,b){if($item=b.item,"sortable2"!=$item.parent().attr("id")&&($item.clone().appendTo(c),!Quasar.train.isSequential()&&null==$item.attr("data-badge"))){var d=Number(prompt("Quantas unidades deseja recrutar?",1));1>d&&(d=1),$item.attr("data-badge",d),$item.addClass("badge1")}Quasar.train.updateRecruiment()}}).disableSelection()}}},utils:{IsNumeric:function(a){return a-0==a&&(""+a).replace(/^\s+|\s+$/g,"").length>0
},stringToSec:function(a){if("undefined"==typeof a)return null;var b=a.split(":");if(b.length<3)return null;var c=0;return c+=60*Number(b[0])*60,c+=60*Number(b[1]),c+=Number(b[2]),Number(c)},secToString:function(a){var b=Math.floor(a/3600),c=a%3600,d=Math.floor(c/60),e=c%60,f=Math.ceil(e);return(10>b?"0"+b:b)+":"+(10>d?"0"+d:d)+":"+(10>f?"0"+f:f)},getVillageByID:function(a){for(var b=0;b<TWMap.villages.length;b++)if("undefined"!=typeof TWMap.villages[b]&&TWMap.villages[b].id==a)return TWMap.villages[b];return null},random:function(a,b){return Math.floor(Math.random()*(b-a+1))+a},coordToId:function(a){if("undefined"===TWMap)return null;var b=TWMap.villages[a];return"undefined"==typeof b?null:b.id},getNextVillage:function(){var a=new QJSON("villages",!0),b=game_data.village.coord,c=a.getIndexOf(b)+1;return c>a.length()-1&&(c=0),a.get(c)},setReload:function(a){var b=Quasar.utils.random(Number(Quasar.config.get("min_rand",300)),Number(Quasar.config.get("max_rand",900)));console.log("Reloading in "+b+" seconds"),Quasar.interface.menu.countDown(b,function(){if(game_data.player.premium&&game_data.player.villages>1)location.href=$("#village_switch_right").attr("href");else if(game_data.player.villages>1&&null!=Quasar.utils.getNextVillage()){var b=Quasar.utils.getNextVillage();location.href="?village="+b+a}else location.href=""})},getPrevVillage:function(){var a=new QJSON("villages",!0),b=game_data.village.coord,c=a.getIndexOf(b)-1;return 0>c&&(c=a.length()-1),a.get(c)},getDataOld:function(a,b){var c=localStorage.getItem(a);if(!c)return void 0==b?"":(this.setData(a,b),b);var d=c[0];switch(c=c.substring(1),d){case"b":return"true"==c;case"n":return Number(c);default:return c}},setDataOld:function(a,b){b=(typeof b)[0]+b,localStorage.setItem(a,b)},getData:function(a,b){var c=new QJSON(game_data.player.name);return null===c.get(a)?b:c.get(a)},setData:function(a,b){var c=new QJSON(game_data.player.name);c.set(a,b),c.save()},_GET:function(a,b){null===b&&(b=location.href),url=b.replace(/.*?\?/,"");for(var c=url.split("&"),d=0;d<c.length;d++)if(null!==d.match(a))return decodeURIComponent(c[d].replace(a+"=",""));return null},orderByDis:function(a,b){var c,d,e,f=[],g=a.split("|")[0],h=a.split("|")[1];for(b instanceof Array||(b=b.split(" ")),e=0;e<b.length;e++)c=b[e].split("|")[0],d=b[e].split("|")[1],f[e]=Math.sqrt(Math.pow(c-g,2)+Math.pow(d-h,2));for(e=0;e<b.length;e++)for(var i=e+1;i<b.length;i++)if(f[i]<f[e]){var j=f[i];f[i]=f[e],f[e]=j;var k=b[i];b[i]=b[e],b[e]=k}return b},clean:function(a){var b=[];a instanceof Array||(a=a.split(" "));for(var c=0;c<a.length;c++)!b.indexOf(a[c])>-1&&""!==a[c]&&b.push(a[c]);return b},tickTimer:function(a){var b=a.endTime-(getLocalTime()+timeDiff);if(0>=b){{var c=a.element.parent().parent();c.parent().parent().find("tr.sortable_row")}return c.remove(),("train"==game_data.screen||"main"==game_data.screen)&&Loader.goTo(),!0}return formatTime(a.element,b,!1),!1}},game:{builds:{main:{max:30,name:"Edifício principal",wood:90,stone:80,iron:70,pop:5,fwood:1.26,fstone:1.275,firon:1.26,fpop:1.17},barracks:{max:25,name:"Quartel",wood:200,stone:170,iron:90,pop:7,fwood:1.26,fstone:1.28,firon:1.26,fpop:1.17},stable:{max:20,name:"Estabulo",wood:270,stone:240,iron:260,pop:8,fwood:1.26,fstone:1.28,firon:1.26,fpop:1.17},garage:{max:15,name:"Oficina",wood:300,stone:240,iron:260,pop:8,fwood:1.26,fstone:1.28,firon:1.26,fpop:1.17},church:{max:3,name:"Igreja",wood:16e3,stone:2e4,iron:5e3,pop:5e3,fwood:1.26,fstone:1.28,firon:1.26,fpop:1.55},church_f:{max:1,name:"Primeira Igreja",wood:160,stone:200,iron:50,pop:5,fwood:1.26,fstone:1.28,firon:1.26,fpop:1.55},snob:{max:1,name:"Academia",wood:15e3,stone:25e3,iron:1e4,pop:80,fwood:2,fstone:2,firon:2,fpop:1.17},smith:{max:20,name:"Ferreiro",wood:220,stone:180,iron:240,pop:20,fwood:1.26,fstone:1.275,firon:1.26,fpop:1.17},place:{max:1,name:"Praça",wood:10,stone:40,iron:30,pop:0,fwood:1.26,fstone:1.275,firon:1.26,fpop:1.17},statue:{max:1,name:"Estabulo",wood:220,stone:220,iron:220,pop:10,fwood:1.26,fstone:1.275,firon:1.26,fpop:1.17},market:{max:25,name:"Mercado",wood:100,stone:100,iron:100,pop:20,fwood:1.26,fstone:1.275,firon:1.26,fpop:1.17},wood:{max:30,name:"Bosque",wood:50,stone:60,iron:40,pop:5,fwood:1.25,fstone:1.275,firon:1.245,fpop:1.155},stone:{max:30,name:"Poço de argila",wood:65,stone:50,iron:40,pop:5,fwood:1.27,fstone:1.265,firon:1.24,fpop:1.14},iron:{max:30,name:"Mina de ferro",wood:75,stone:65,iron:70,pop:10,fwood:1.252,fstone:1.275,firon:1.24,fpop:1.17},farm:{max:30,name:"Fazenda",wood:45,stone:40,iron:30,pop:0,fwood:1.3,fstone:1.32,firon:1.29,fpop:1},storage:{max:30,name:"Armazem",wood:60,stone:50,iron:40,pop:0,fwood:1.265,fstone:1.27,firon:1.245,fpop:1.15},hide:{max:10,name:"Esconderijo",wood:50,stone:60,iron:50,pop:2,fwood:1.25,fstone:1.25,firon:1.25,fpop:1.17},wall:{max:20,name:"Muralha",wood:50,stone:100,iron:20,pop:5,fwood:1.26,fstone:1.275,firon:1.26,fpop:1.17}},units:{spear:{wood:50,stone:30,iron:10,pop:1,time:1020,ed:"barracks",name:"spear"},sword:{wood:30,stone:30,iron:70,pop:1,time:1500,ed:"barracks",name:"sword"},axe:{wood:60,stone:30,iron:40,pop:1,time:1320,ed:"barracks",name:"axe"},archer:{wood:100,stone:30,iron:60,pop:1,time:1800,ed:"barracks",name:"archer"},spy:{wood:50,stone:50,iron:20,pop:2,time:900,ed:"stable",name:"spy"},light:{wood:100,stone:125,iron:250,pop:4,time:1800,ed:"stable",name:"light"},marcher:{wood:250,stone:100,iron:150,pop:5,time:2700,ed:"stable",name:"marcher"},heavy:{wood:200,stone:150,iron:600,pop:6,time:3600,ed:"stable",name:"heavy"},ram:{wood:300,stone:200,iron:200,pop:5,time:4800,ed:"garage",name:"ram"},catapult:{wood:320,stone:400,iron:100,pop:8,time:7200,ed:"garage",name:"catapult"}}}};var AntiCaptcha=function(a){function b(){a.call(this,"Captcha")}return __extends(b,a),b.prototype.preExecute=function(){},b.prototype.check=function(){return void 0},b.prototype.execute=function(){},b}(SimplePlugin);