var vows=require("vows"),assert=require("assert"),iconv=require(__dirname+"/../");var ascii="\x00\b	\n\f\r"+" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~";var encodings=[{name:"windows1254",variations:["windows-1254","win-1254","win1254","cp1254","cp-1254",1254],strings:{empty:"",ascii:ascii,turkish:"â‚¬â€šÆ’â€â€¦â€ â€¡Ë†â€°Å â€¹Å’â€˜â€™â€œâ€â€¢â€“â€”Ëœâ„¢Å¡â€ºÅ“Å¸Â¡Â¢Â£Â¤Â¥Â¦Â§Â¨Â©ÂªÂ«Â¬Â®Â¯Â°Â±Â²Â³Â´ÂµÂ¶Â·Â¸Â¹ÂºÂ»Â¼Â½Â¾Â¿Ã€ÃÃ‚ÃƒÃ„Ã…Ã†Ã‡ÃˆÃ‰ÃŠÃ‹ÃŒÃÃÃÄÃ‘Ã’Ã“Ã”Ã•Ã–Ã—Ã˜Ã™ÃšÃ›ÃœÄ°ÅÃŸÃ Ã¡Ã¢Ã£Ã¤Ã¥Ã¦Ã§Ã¨Ã©ÃªÃ«Ã¬Ã­Ã®Ã¯ÄŸÃ±Ã²Ã³Ã´ÃµÃ¶Ã·Ã¸Ã¹ÃºÃ»Ã¼Ä±ÅŸÃ¿",untranslatable:"ÂÂÂÂÂÂÂ"},encodedStrings:{empty:new Buffer(""),ascii:new Buffer(ascii,"binary"),turkish:new Buffer("Â€Â‚ÂƒÂ„Â…Â†Â‡ÂˆÂ‰ÂŠÂ‹ÂŒ"+"Â‘Â’Â“Â”Â•Â–Â—Â˜Â™ÂšÂ›ÂœÂŸ"+"Â¡Â¢Â£Â¤Â¥Â¦Â§Â¨Â©ÂªÂ«Â¬Â®Â¯"+"Â°Â±Â²Â³Â´ÂµÂ¶Â·Â¸Â¹ÂºÂ»Â¼Â½Â¾Â¿"+"Ã€ÃÃ‚ÃƒÃ„Ã…Ã†Ã‡ÃˆÃ‰ÃŠÃ‹ÃŒÃÃÃ"+"ÃÃ‘Ã’Ã“Ã”Ã•Ã–Ã—Ã˜Ã™ÃšÃ›ÃœÃÃÃŸ"+"Ã Ã¡Ã¢Ã£Ã¤Ã¥Ã¦Ã§Ã¨Ã©ÃªÃ«Ã¬Ã­Ã®Ã¯"+"Ã°Ã±Ã²Ã³Ã´ÃµÃ¶Ã·Ã¸Ã¹ÃºÃ»Ã¼Ã½Ã¾Ã¿","binary")}},{name:"iso88599",variations:["iso-8859-9","turkish","turkish8","cp28599","cp-28599",28599],strings:{empty:"",ascii:ascii,turkish:"Â Â¡Â¢Â£Â¤Â¥Â¦Â§Â¨Â©ÂªÂ«Â¬Â­Â®Â¯Â°Â±Â²Â³Â´ÂµÂ¶Â·Â¸Â¹ÂºÂ»Â¼Â½Â¾Â¿Ã€ÃÃ‚ÃƒÃ„Ã…Ã†Ã‡ÃˆÃ‰ÃŠÃ‹ÃŒÃÃÃÄÃ‘Ã’Ã“Ã”Ã•Ã–Ã—Ã˜Ã™ÃšÃ›ÃœÄ°ÅÃŸÃ Ã¡Ã¢Ã£Ã¤Ã¥Ã¦Ã§Ã¨Ã©ÃªÃ«Ã¬Ã­Ã®Ã¯ÄŸÃ±Ã²Ã³Ã´ÃµÃ¶Ã·Ã¸Ã¹ÃºÃ»Ã¼Ä±ÅŸÃ¿",untranslatable:""},encodedStrings:{empty:new Buffer(""),ascii:new Buffer(ascii,"binary"),turkish:new Buffer("Â Â¡Â¢Â£Â¤Â¥Â¦Â§Â¨Â©ÂªÂ«Â¬Â­Â®Â¯"+"Â°Â±Â²Â³Â´ÂµÂ¶Â·Â¸Â¹ÂºÂ»Â¼Â½Â¾Â¿"+"Ã€ÃÃ‚ÃƒÃ„Ã…Ã†Ã‡ÃˆÃ‰ÃŠÃ‹ÃŒÃÃÃ"+"ÃÃ‘Ã’Ã“Ã”Ã•Ã–Ã—Ã˜Ã™ÃšÃ›ÃœÃÃÃŸ"+"Ã Ã¡Ã¢Ã£Ã¤Ã¥Ã¦Ã§Ã¨Ã©ÃªÃ«Ã¬Ã­Ã®Ã¯"+"Ã°Ã±Ã²Ã³Ã´ÃµÃ¶Ã·Ã¸Ã¹ÃºÃ»Ã¼Ã½Ã¾Ã¿","binary")}}];var testsBatch={};encodings.forEach(function(encoding){var enc=encoding.variations[0];var key="turkish";var tests={"Convert to empty buffer":function(){assert.strictEqual(iconv.toEncoding("",enc).toString("binary"),new Buffer("").toString("binary"))},"Convert from empty buffer":function(){assert.strictEqual(iconv.fromEncoding(new Buffer(""),enc),"")},"Convert from buffer":function(){for(var key in encoding.encodedStrings)assert.strictEqual(iconv.fromEncoding(encoding.encodedStrings[key],enc),encoding.strings[key])},"Convert to buffer":function(){for(var key in encoding.encodedStrings)assert.strictEqual(iconv.toEncoding(encoding.strings[key],enc).toString("binary"),encoding.encodedStrings[key].toString("binary"))},"Try different variations of encoding":function(){encoding.variations.forEach(function(enc){assert.strictEqual(iconv.fromEncoding(encoding.encodedStrings[key],enc),encoding.strings[key]);assert.strictEqual(iconv.toEncoding(encoding.strings[key],enc).toString("binary"),encoding.encodedStrings[key].toString("binary"))})},"Untranslatable chars are converted to defaultCharSingleByte":function(){var expected=encoding.strings.untranslatable.split("").map(function(c){return iconv.defaultCharSingleByte}).join("");assert.strictEqual(iconv.toEncoding(encoding.strings.untranslatable,enc).toString("binary"),expected)}};testsBatch[encoding.name+":"]=tests});vows.describe("Test Turkish encodings").addBatch(testsBatch).export(module);