"use strict";var path=require("path");var glob=require("glob");var _=require("lodash");module.exports=function(patterns,options){if(!Array.isArray(patterns)){patterns=[patterns]}var globOptions=Object.create(options||{});globOptions.maxDepth=1;globOptions.cwd=path.resolve(globOptions.cwd||".");var files,lastpath;do{files=_(patterns).map(function(pattern){return glob.sync(pattern,globOptions)}).flatten().uniq().value();if(files.length>0){return path.resolve(path.join(globOptions.cwd,files[0]))}lastpath=globOptions.cwd;globOptions.cwd=path.resolve(globOptions.cwd,"..")}while(globOptions.cwd!==lastpath);return null};