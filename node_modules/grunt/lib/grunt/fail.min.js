"use strict";var grunt=require("../grunt");var fail=module.exports={};fail.code={FATAL_ERROR:1,MISSING_GRUNTFILE:2,TASK_FAILURE:3,TEMPLATE_ERROR:4,INVALID_AUTOCOMPLETE:5,WARNING:6};function writeln(e,mode){grunt.log.muted=false;var msg=String(e.message||e);if(!grunt.option("no-color")){msg+=""}if(mode==="warn"){msg="Warning: "+msg+" ";msg+=grunt.option("force")?"Used --force, continuing.".underline:"Use --force to continue.";msg=msg.yellow}else{msg=("Fatal error: "+msg).red}grunt.log.writeln(msg)}function dumpStack(e){if(grunt.option("stack")){if(e.origError&&e.origError.stack){console.log(e.origError.stack)}else if(e.stack){console.log(e.stack)}}}fail.fatal=function(e,errcode){writeln(e,"fatal");dumpStack(e);grunt.util.exit(typeof errcode==="number"?errcode:fail.code.FATAL_ERROR)};fail.errorcount=0;fail.warncount=0;fail.warn=function(e,errcode){var message=typeof e==="string"?e:e.message;fail.warncount++;writeln(message,"warn");if(!grunt.option("force")){dumpStack(e);grunt.log.writeln().fail("Aborted due to warnings.");grunt.util.exit(typeof errcode==="number"?errcode:fail.code.WARNING)}};fail.report=function(){if(fail.warncount>0){grunt.log.writeln().fail("Done, but with warnings.")}else{grunt.log.writeln().success("Done, without errors.")}};